<!DOCTYPE html>
<html>

<head>
  <title>Restaurant Portal</title>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', Arial, sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
      color: white;
      background: #0a0015;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    /* VIBRANT Full-Screen Animated Background */
    .aurora-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: linear-gradient(45deg, #1a0533, #0d1b2a, #1b0a3c, #0a1929);
      background-size: 400% 400%;
      animation: gradientShift 8s ease infinite;
      overflow: hidden;
    }

    @keyframes gradientShift {

      0%,
      100% {
        background-position: 0% 50%;
      }

      25% {
        background-position: 100% 0%;
      }

      50% {
        background-position: 100% 100%;
      }

      75% {
        background-position: 0% 100%;
      }
    }

    .aurora-bg::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background:
        radial-gradient(ellipse 100% 80% at 20% 20%, rgba(255, 0, 100, 0.6) 0%, transparent 60%),
        radial-gradient(ellipse 80% 100% at 80% 10%, rgba(100, 0, 255, 0.6) 0%, transparent 60%),
        radial-gradient(ellipse 90% 70% at 70% 90%, rgba(0, 180, 255, 0.6) 0%, transparent 60%),
        radial-gradient(ellipse 70% 90% at 10% 80%, rgba(255, 120, 0, 0.5) 0%, transparent 60%),
        radial-gradient(ellipse 80% 80% at 50% 50%, rgba(0, 255, 180, 0.4) 0%, transparent 60%);
      animation: colorPulse 6s ease-in-out infinite alternate;
    }

    @keyframes colorPulse {
      0% {
        opacity: 0.9;
        transform: scale(1);
      }

      100% {
        opacity: 1;
        transform: scale(1.05);
      }
    }

    .aurora-bg::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background:
        radial-gradient(circle at 25% 25%, rgba(255, 50, 200, 0.7) 0%, transparent 30%),
        radial-gradient(circle at 75% 25%, rgba(50, 150, 255, 0.7) 0%, transparent 30%),
        radial-gradient(circle at 50% 75%, rgba(255, 220, 50, 0.6) 0%, transparent 30%),
        radial-gradient(circle at 25% 75%, rgba(50, 255, 200, 0.6) 0%, transparent 30%),
        radial-gradient(circle at 75% 75%, rgba(200, 50, 255, 0.6) 0%, transparent 30%);
      animation: colorWave 12s linear infinite;
    }

    @keyframes colorWave {
      0% {
        transform: translate(0, 0) rotate(0deg);
      }

      100% {
        transform: translate(-50%, -50%) rotate(360deg);
      }
    }

    /* Glassmorphism Styling */
    .glass-card {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 20px;
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
      padding: 40px;
      width: 100%;
      max-width: 500px;
    }

    .blob {
      position: absolute;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.7;
      animation: floatBlob 25s ease-in-out infinite;
    }

    .blob-1 {
      width: 60vw;
      height: 60vw;
      background: radial-gradient(circle, #ff006e 0%, #ff006e 20%, transparent 70%);
      top: -20%;
      left: -20%;
      animation-duration: 30s;
    }

    .blob-2 {
      width: 50vw;
      height: 50vw;
      background: radial-gradient(circle, #8338ec 0%, #8338ec 20%, transparent 70%);
      top: 10%;
      right: -15%;
      animation-duration: 25s;
      animation-delay: -8s;
    }

    .blob-3 {
      width: 55vw;
      height: 55vw;
      background: radial-gradient(circle, #3a86ff 0%, #3a86ff 20%, transparent 70%);
      bottom: -15%;
      left: 20%;
      animation-duration: 28s;
      animation-delay: -12s;
    }

    .blob-4 {
      width: 45vw;
      height: 45vw;
      background: radial-gradient(circle, #00f5d4 0%, #00f5d4 20%, transparent 70%);
      bottom: 20%;
      right: -10%;
      animation-duration: 22s;
      animation-delay: -5s;
    }

    .blob-5 {
      width: 40vw;
      height: 40vw;
      background: radial-gradient(circle, #fb5607 0%, #fb5607 20%, transparent 70%);
      top: 40%;
      left: 30%;
      animation-duration: 35s;
      animation-delay: -15s;
    }

    .blob-6 {
      width: 50vw;
      height: 50vw;
      background: radial-gradient(circle, #ffbe0b 0%, #ffbe0b 20%, transparent 70%);
      top: 60%;
      right: 30%;
      animation-duration: 32s;
      animation-delay: -20s;
    }

    @keyframes floatBlob {

      0%,
      100% {
        transform: translate(0, 0) scale(1);
      }

      20% {
        transform: translate(10vw, -8vh) scale(1.1);
      }

      40% {
        transform: translate(-8vw, 12vh) scale(0.9);
      }

      60% {
        transform: translate(15vw, 5vh) scale(1.15);
      }

      80% {
        transform: translate(-12vw, -10vh) scale(0.95);
      }
    }

    @keyframes mixColors {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulse {

      0%,
      100% {
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
      }

      50% {
        box-shadow: 0 15px 50px rgba(102, 126, 234, 0.3);
      }
    }

    .container {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25);
      padding: 50px;
      max-width: 500px;
      width: 100%;
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.5);
      animation: slideUp 1.5s ease, pulse 6s ease-in-out infinite;
    }

    h2 {
      background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 35px;
      text-align: center;
      font-size: 32px;
      font-weight: 700;
    }

    .form-group {
      margin-bottom: 18px;
      display: flex;
      flex-direction: column;
    }

    label {
      font-weight: 600;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 10px;
      font-size: 15px;
    }

    input,
    textarea,
    select {
      width: 100%;
      padding: 14px;
      border-radius: 12px;
      border: 2px solid rgba(102, 126, 234, 0.3);
      font-size: 14px;
      font-family: inherit;
      transition: all 0.6s ease;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(5px);
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2);
      transform: translateY(-2px);
      background: rgba(255, 255, 255, 0.95);
    }

    input.error,
    textarea.error {
      border-color: #e74c3c;
      box-shadow: 0 0 0 4px rgba(231, 76, 60, 0.2);
    }

    textarea {
      resize: vertical;
      min-height: 80px;
    }

    .error-msg {
      color: #e74c3c;
      font-size: 12px;
      margin-top: 5px;
      display: none;
      animation: slideUp 0.3s ease;
    }

    .error-msg.show {
      display: block;
    }

    button {
      padding: 14px 28px;
      border: none;
      border-radius: 12px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      background-size: 200% 200%;
      color: white;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.6s ease;
      margin-top: 20px;
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
      position: relative;
      overflow: hidden;
    }

    button:before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.2);
      transition: left 0.8s ease;
      z-index: 1;
    }

    button:hover:before {
      left: 100%;
    }

    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 35px rgba(102, 126, 234, 0.5);
      background-position: 200% center;
    }

    button:active {
      transform: translateY(-1px);
    }

    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    #msg {
      margin-top: 20px;
      padding: 18px;
      border-radius: 12px;
      text-align: center;
      font-weight: 600;
      display: none;
      animation: slideUp 1.0s ease;
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.5);
    }

    #msg.success {
      display: block;
      background: linear-gradient(135deg, rgba(76, 175, 80, 0.2) 0%, rgba(102, 230, 130, 0.2) 100%);
      color: #2e7d32;
      border: 2px solid rgba(76, 175, 80, 0.5);
    }

    #msg.error {
      display: block;
      background: linear-gradient(135deg, rgba(231, 76, 60, 0.2) 0%, rgba(244, 135, 126, 0.2) 100%);
      color: #c62828;
      border: 2px solid rgba(231, 76, 60, 0.5);
    }

    .item-card .delete-btn:hover {
      background: linear-gradient(135deg, #e74c3c, #c0392b);
    }
  </style>
</head>

<body>
  <div class="aurora-bg">
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    <div class="blob blob-3"></div>
    <div class="blob blob-4"></div>
    <div class="blob blob-5"></div>
    <div class="blob blob-6"></div>
  </div>
  <div class="container">
    <h2>üç¥ Restaurant Portal</h2>

    <form id="restaurantForm" onsubmit="submitRestaurant(event)">
      <div class="form-group">
        <label for="name">Restaurant Name *</label>
        <input id="name" type="text" placeholder="Enter your restaurant name" required>
        <span class="error-msg" id="nameError"></span>
      </div>

      <div class="form-group">
        <label for="email">Email *</label>
        <input id="email" type="email" placeholder="your@email.com" required>
        <span class="error-msg" id="emailError"></span>
      </div>

      <div class="form-group">
        <label for="phone">Phone Number *</label>
        <input id="phone" type="tel" placeholder="(123) 456-7890" required>
        <span class="error-msg" id="phoneError"></span>
      </div>

      <div class="form-group">
        <label for="location">Location/Address *</label>
        <div style="display: flex; gap: 10px;">
          <input id="location" type="text" placeholder="Street address" required style="flex: 1;">
          <button type="button" onclick="getLocation()"
            style="width: auto; margin-top: 0; padding: 10px 15px; background: #667eea; font-size: 20px;"
            title="Get Current Location">üìç</button>
        </div>
        <span class="error-msg" id="locationError"></span>
      </div>

      <div class="form-group">
        <label for="food">Food Item *</label>
        <input id="food" type="text" placeholder="e.g., Biryani, Samosas" required>
        <span class="error-msg" id="foodError"></span>
      </div>

      <div class="form-group">
        <label for="quantity">Quantity Available *</label>
        <input id="quantity" type="number" placeholder="Number of portions" min="1" required>
        <span class="error-msg" id="quantityError"></span>
      </div>

      <div class="form-group">
        <label for="foodValue">Estimated Food Value ($) *</label>
        <input id="foodValue" type="number" placeholder="Actual value of food" min="1" required>
        <span class="error-msg" id="foodValueError"></span>
      </div>

      <div class="form-group">
        <label for="expiryHours">Freshness Window (Hours) *</label>
        <input id="expiryHours" type="number" placeholder="Valid for how many hours?" min="1" max="48" value="6"
          required>
        <span class="error-msg" id="expiryHoursError"></span>
      </div>

      <div class="form-group">
        <label for="category">Food Category</label>
        <select id="category">
          <option value="">Select a category</option>
          <option value="North Indian">North Indian</option>
          <option value="South Indian">South Indian</option>
          <option value="Chinese">Chinese</option>
          <option value="Fast Food">Fast Food</option>
          <option value="Desserts">Desserts</option>
          <option value="Beverages">Beverages</option>
          <option value="Other">Other</option>
        </select>
      </div>

      <div class="form-group">
        <label for="membership">Membership Plan *</label>
        <select id="membership" required>
          <option value="Basic">Basic (Free)</option>
          <option value="Silver">Silver ($19/mo)</option>
          <option value="Gold">Gold ($49/mo)</option>
        </select>
      </div>

      <button type="submit">Submit Food Item</button>
    </form>

    <div id="msg"></div>
  </div>

  <script>
    const messageEl = document.getElementById("msg");
    const form = document.getElementById("restaurantForm");

    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }

    function validatePhone(phone) {
      const re = /^[\d\s\-\+\(\)]{10,}$/;
      return re.test(phone.replace(/\s/g, ''));
    }

    function showError(fieldId, message) {
      const field = document.getElementById(fieldId);
      const errorEl = document.getElementById(fieldId + "Error");
      field.classList.add("error");
      errorEl.textContent = message;
      errorEl.classList.add("show");
    }

    function clearError(fieldId) {
      const field = document.getElementById(fieldId);
      const errorEl = document.getElementById(fieldId + "Error");
      field.classList.remove("error");
      errorEl.classList.remove("show");
    }

    function getLocation() {
      const locInput = document.getElementById("location");
      if (!navigator.geolocation) {
        alert("Geolocation is not supported by your browser");
        return;
      }

      locInput.value = "üìç Locating...";

      navigator.geolocation.getCurrentPosition(
        async (position) => {
          const lat = position.coords.latitude.toFixed(6);
          const lon = position.coords.longitude.toFixed(6);

          try {
            // Optional: Reverse geocoding for better UX
            const res = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);
            const data = await res.json();
            const address = data.display_name ? data.display_name.split(",").slice(0, 3).join(",") : "My Location";
            locInput.value = `${address} Coordinates: ${lat},${lon}`;
          } catch (e) {
            locInput.value = `Coordinates: ${lat},${lon}`;
          }
        },
        () => {
          alert("Unable to retrieve your location");
          locInput.value = "";
        }
      );
    }

    function validateForm() {
      let isValid = true;
      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const location = document.getElementById("location").value.trim();
      const food = document.getElementById("food").value.trim();
      const quantity = document.getElementById("quantity").value.trim();

      if (!name || name.length < 3) {
        showError("name", "Restaurant name must be at least 3 characters");
        isValid = false;
      } else {
        clearError("name");
      }

      if (!email || !validateEmail(email)) {
        showError("email", "Please enter a valid email");
        isValid = false;
      } else {
        clearError("email");
      }

      if (!phone || !validatePhone(phone)) {
        showError("phone", "Please enter a valid phone number");
        isValid = false;
      } else {
        clearError("phone");
      }

      if (!location || location.length < 5) {
        showError("location", "Please enter a valid location");
        isValid = false;
      } else {
        clearError("location");
      }

      if (!food || food.length < 2) {
        showError("food", "Please enter a food item");
        isValid = false;
      } else {
        clearError("food");
      }

      if (!quantity || quantity < 1) {
        showError("quantity", "Quantity must be at least 1");
        isValid = false;
      } else {
        clearError("quantity");
      }

      return isValid;
    }

    function showMessage(message, type) {
      messageEl.textContent = message;
      messageEl.className = type;
      messageEl.style.display = "block";
      setTimeout(() => {
        messageEl.style.display = "none";
      }, 5000);
    }

    function submitRestaurant(event) {
      event.preventDefault();

      if (!validateForm()) {
        showMessage("‚ùå Please fix the errors above", "error");
        return;
      }

      const data = {
        name: document.getElementById("name").value.trim(),
        email: document.getElementById("email").value.trim(),
        phone: document.getElementById("phone").value.trim(),
        location: document.getElementById("location").value.trim(),
        food: document.getElementById("food").value.trim(),
        quantity: parseInt(document.getElementById("quantity").value),
        category: document.getElementById("category").value,
        membership: document.getElementById("membership").value,
        foodValue: parseFloat(document.getElementById("foodValue").value),
        expiryHours: parseInt(document.getElementById("expiryHours").value)
      };

      const submitBtn = document.querySelector("button[type='submit']");
      submitBtn.disabled = true;
      submitBtn.textContent = "Submitting...";

      fetch("/add-restaurant", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      })
        .then(res => {
          if (!res.ok) throw new Error("Server error");
          return res.json();
        })
        .then(response => {
          showMessage("‚úÖ Food item submitted successfully!", "success");
          form.reset();
          submitBtn.disabled = false;
          submitBtn.textContent = "Submit Food Item";
        })
        .catch(error => {
          showMessage("‚ùå Error submitting data: " + error.message, "error");
          submitBtn.disabled = false;
          submitBtn.textContent = "Submit Food Item";
        });
    }

  </script>

</body>

</html>